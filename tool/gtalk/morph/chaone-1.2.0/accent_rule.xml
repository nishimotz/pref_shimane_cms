<?xml version="1.0" encoding="Shift_JIS"?>

<!-- ƒAƒNƒZƒ“ƒgŒ^Œ‹‡‹K‘¥               -->
<!--                    used in ChaOne  -->
<!--           2005-03-20 by Studio ARC -->
<!-- Copyright (c) 2005 Studio ARC      -->

<aType_rule>

<!-- ***‹Lq•û–@*** -->
<!-- 1. rule‚Í1‚Â‚Ìif‚Æ1‚Â‚Ìthen‚©‚ç‚È‚é              -->
<!-- 2. if‚ÍðŒŽ®‚ð1‚Â‚¾‚¯‚à‚Â                       -->
<!-- 3. ðŒŽ®‚Å‹Lq‰Â”\‚È—v‘f‚Ípre, current          -->
<!-- 4. ðŒŽ®‚Å‹Lq‰Â”\‚È‘®«‚Í                      -->
<!--    aConType, aType, no_nucleus, tokushuhaku      -->
<!-- 5. rule‚ÌŽq—v‘f‚Ìthen‚Í‘®«aType‚ð‚à‚Â‚©A       -->
<!--    ‚ ‚é‚¢‚Íif, then, else‚ðŽq—v‘f‚Æ‚µ‚Ä‚à‚Â      -->
<!-- 6. then‚ÌŽq—v‘f‚Ìthen, else‚Í‘®«aType‚ð‚à‚Â     -->
<!-- 7. ‘®«aType‚Ì’l‚É‚ÍA                           -->
<!--    Œ‹‡Œê‚ÌƒAƒNƒZƒ“ƒgŒ^‚ÌŒvŽZ•û–@‚ð‹Lq‚·‚é      -->
<!-- 8. ƒAƒNƒZƒ“ƒgŒ^‚ÌŒvŽZ‚ÉŽg—p‚Å‚«‚é—v‘f‚Í          -->
<!--    ’è”Apre, current, @mora, @aType, @cm, @cm2  -->
<!-- 9. ƒAƒNƒZƒ“ƒgŒ^‚ÌŒvŽZ‚ÉŽg—p‚Å‚«‚é‰‰ŽZŽq‚Í+, -    -->

<!-- Ú“ªŽ«(pre) + Ž©—§Œê(current) -->
<rule id="P1">
  <!-- ˆê‘Ì‰»Œ^ -->
  <if>
    <pre aConType="P1"/>
  </if>
  <then>
    <if>
      <current no_nucleus="yes"/>
    </if>
    <then aType="0"/>
    <else aType="pre/@mora + current/@aType"/>
  </then>
</rule>

<rule id="P2">
  <!-- Ž©—§ŒêŒ‹‡Œ^ -->
  <if>
    <pre aConType="P2"/>
  </if>
  <then>
    <if>
      <current no_nucleus="yes"/>
    </if>
    <then aType="pre/@mora + 1"/>
    <else aType="pre/@mora + current/@aType"/>
  </then>
</rule>

<rule id="P4">
  <!-- ¬‡Œ^ -->
  <if>
    <pre aConType="P4"/>
  </if>
  <then>
    <if>
      <current no_nucleus="yes"/>
    </if>
    <then aType="pre/@mora + 1"/>
    <else aType="pre/@aType"/>
  </then>
</rule>

<rule id="P5">
  <!-- “®ŽŒ^Œ`—eŽŒÚ‘±Œ^ -->
  <if>
    <pre aConType="P5"/>
  </if>
  <then>
    <if>
      <current tokushuhaku="-2"/>
    </if>
    <then aType="pre/@mora + current/@mora - 2"/>
    <else aType="pre/@mora + current/@mora - 1"/>
  </then>
</rule>

<rule id="P6">
  <if>
    <pre aConType="P6"/>
  </if>
  <then aType="0"/>
</rule>

<rule id="P7">
  <if>
    <pre aConType="P7"/>
  </if>
  <then>
    <if>
      <current no_nucleus="yes"/>
    </if>
    <then aType="0"/>
    <else aType="pre/@aType"/>
  </then>
</rule>

<rule id="P8">
  <if>
    <pre aConType="P8"/>
  </if>
  <then>
    <if>
      <current no_nucleus="yes"/>
    </if>
    <then aType="pre/@mora + 1"/>
    <else aType="0"/>
  </then>
</rule>

<rule id="P9">
  <if>
    <pre aConType="P9"/>
  </if>
  <then>
    <if>
      <current no_nucleus="yes"/>
    </if>
    <then aType="pre/@mora + 1"/>
    <else aType="pre/@aType"/>
  </then>
</rule>

<rule id="P10">
  <if>
    <pre aConType="P10"/>
  </if>
  <then>
    <if>
      <current no_nucleus="yes"/>
    </if>
    <then aType="pre/@mora + 1"/>
    <else aType="pre/@aType"/>
  </then>
</rule>

<rule id="P11">
  <if>
    <pre aConType="P11"/>
  </if>
  <then>
    <if>
      <current no_nucleus="yes"/>
    </if>
    <then aType="pre/@mora"/>
    <else aType="pre/@mora + pre/@aType"/>
  </then>
</rule>

<rule id="P12">
  <if>
    <pre aConType="P12"/>
  </if>
  <then>
    <if>
      <current no_nucleus="yes"/>
    </if>
    <then aType="pre/@mora"/>
    <else aType="pre/@aType"/>
  </then>
</rule>

<rule id="P13">
  <if>
    <pre aConType="P13"/>
  </if>
  <then aType="pre/@aType"/>
</rule>

<rule id="P14">
  <if>
    <pre aConType="P14"/>
  </if>
  <then>
    <if>
      <current no_nucleus="yes"/>
    </if>
    <then aType="pre/@aType"/>
    <else aType="pre/@mora + current/@aType"/>
  </then>
</rule>

<rule id="P15">
  <if>
    <pre aConType="P15"/>
  </if>
  <then>
    <if>
      <current no_nucleus="yes"/>
    </if>
    <then aType="pre/@aType"/>
    <else aType="1"/>
  </then>
</rule>

<!-- Ž©—§Œê(pre) + •t‘®Œê(current) -->

<rule id="F1">
  <!-- ]‘®Œ^ -->
  <if>
    <current aConType="F1"/>
  </if>
  <then aType="pre/@aType"/>
</rule>

<rule id="F2">
  <!-- •sŠ®‘SŽx”zŒ^ -->
  <if>
    <current aConType="F2"/>
  </if>
  <then>
    <if>
      <pre aType="0"/>
    </if>
    <then aType="pre/@mora + current/@cm"/>
    <else aType="pre/@aType"/>
  </then>
</rule>

<rule id="F3">
  <!-- —Z‡Œ^ -->
  <if>
    <current aConType="F3"/>
  </if>
  <then>
    <if>
      <pre aType="0"/>
    </if>
    <then aType="pre/@aType"/>
    <else aType="pre/@mora + current/@cm"/>
  </then>
</rule>

<rule id="F4">
  <!-- Žx”zŒ^1 -->
  <if>
    <current aConType="F4"/>
  </if>
  <then aType="pre/@mora + current/@cm"/>
</rule>

<rule id="F5">
  <!-- Žx”zŒ^2 -->
  <if>
    <current aConType="F5"/>
  </if>
  <then aType="0"/>
</rule>

<rule id="F6">
  <if>
    <current aConType="F6"/>
  </if>
  <then>
    <if>
      <pre aType="0"/>
    </if>
    <then aType="pre/@mora + current/@cm"/>
    <else aType="pre/@mora + current/@cm2"/>
  </then>
</rule>

<rule id="F7">
  <if>
    <current aConType="F7"/>
  </if>
  <then>
    <if>
      <pre aType="0"/>
    </if>
    <then aType="0"/>
    <else aType="pre/@mora + current/@cm"/>
  </then>
</rule>

<rule id="F8">
  <if>
    <current aConType="F8"/>
  </if>
  <then aType="pre/@mora + current/@cm"/>
</rule>

<rule id="F9">
  <if>
    <current aConType="F9"/>
  </if>
  <then>
    <if>
      <pre aType="0"/>
    </if>
    <then aType="pre/@mora + current/@cm"/>
    <else aType="pre/@mora + current/@cm2"/>
  </then>
</rule>

<!-- Ž©—§Œê + Ú”öŽ« -->

<rule id="C1">
  <!-- Ž©—§ŒêŒ‹‡ •Û‘¶Œ^ -->
  <if>
    <current aConType="C1"/>
  </if>
  <then aType="pre/@mora + current/@aType"/>
</rule>

<rule id="C2">
  <!-- Ž©—§ŒêŒ‹‡ ¶‹NŒ^ -->
  <if>
    <current aConType="C2"/>
  </if>
  <then aType="pre/@mora + 1"/>
</rule>

<rule id="C3">
  <!-- ÚŽ«Œ‹‡ •W€Œ^ -->
  <!-- ƒAƒNƒZƒ“ƒg‹å‚ÌÅIƒ‚[ƒ‰‚ð’²‚×‚é -->
  <!-- “ÁŽê”‚È‚çˆê‚Â‘O‚É -->
  <if>
    <current aConType="C3"/>
  </if>
  <then>
    <if>
      <pre tokushuhaku="-1"/>
    </if>
    <then aType="pre/@mora - 1"/>
    <else aType="pre/@mora"/>
  </then>
</rule>

<rule id="C4">
  <!-- ÚŽ«Œ‹‡ •½”Â‰»Œ^ -->
  <if>
    <current aConType="C4"/>
  </if>
  <then aType="0"/>
</rule>

<rule id="C5">
  <if>
    <current aConType="C5"/>
  </if>
  <then aType="pre/@aType"/>
</rule>

<rule id="C6">
  <if>
    <current aConType="C6"/>
  </if>
  <then aType="1"/>
</rule>

<rule id="C7">
  <if>
    <current aConType="C7"/>
  </if>
  <then aType="pre/@mora + current/@cm"/>
</rule>

<rule id="C8">
  <if>
    <current aConType="C8"/>
  </if>
  <then aType="pre/@mora + current/@aType"/>
</rule>

<rule id="C9">
  <if>
    <current aConType="C9"/>
  </if>
  <then aType="0"/>
</rule>

<rule id="C10">
  <if>
    <current aConType="C10"/>
  </if>
  <then aType="pre/@mora + current/@aType"/>
</rule>

<rule id="C11">
  <if>
    <current aConType="C11"/>
  </if>
  <then aType="pre/@mora + current/@cm"/>
</rule>

<rule id="C12">
  <if>
    <current aConType="C12"/>
  </if>
  <then aType="pre/@mora + current/@cm"/>
</rule>

<!-- ‚»‚Ì‘¼‚ÌŒ‹‡ -->

<rule id="default">
  <if>
    <default/>
  </if>
  <then>
    <if>
      <current no_nucleus="yes"/>
    </if>
    <then aType="pre/@mora + 1"/>
    <else aType="pre/@mora + current/@aType"/>
  </then>
</rule>

</aType_rule>
